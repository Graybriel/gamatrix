<!doctype html>
<html>

<head>
  <style>
    table,
    th,
    td {
      border: 1px solid black;
      border-collapse: collapse;
      padding: 3px;
    }
  </style>
  <title>
    gamatrix-gog results
  </title>
</head>

<body>
  <a href="/">Back to home page</a>
  <br><br>
  {{ debug_str }}
  <table>
    <caption>{{ caption }}</caption>
    <tr style="background-color: rgb(124,207,228)">
      <th>Title</th>
      <th>Players</th>
      <th>Comment</th>
      {% if show_keys -%}
      <th>Release Key</th>
      {%- endif %}
    </tr>
    {% for game, value in games.items() -%}
    {% set max_players = value.max_players|default("0", true)|int -%}
    {# Alternate row colors, and grey out titles that support fewer players than selected #}
    <tr style="background-color: rgb({{ loop.cycle('180,227,239', '201,235,243') }})
      {%- if (max_players > 0 and max_players < users|length) -%}
      ;color: grey;
      {%- endif -%}
      ">
      <td>
        {{ value.title }}
        <div style="float:right">
          {% for platform in value.platforms -%}
          <img src="/static/{{ platform }}.png" width="20" height="20">&nbsp;
          {%- endfor -%}
        </div>
      </td>
      <td>{{ value.max_players }}</td>
      <td>{{ value.comment }}</td>
      {% if show_keys -%}
      <td>{{ game }}</td>
      {%- endif -%}
    </tr>
    {%- endfor -%}
  </table>
  <br><br>
  <a href="/">Back to home page</a>
</body>

</html>